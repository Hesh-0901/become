<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Become ‚Äî Espace client</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#E9E5DF">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root{
      --bg:#E9E5DF;
      --surface:#FFFFFF;
      --soft:#F5F2EC;
      --text:#1E1E1E;
      --muted:#6B6B6B;
      --accent:#8B6F47;
      --border:#D6CFC4;
      --radius:18px;
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      min-height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial;
      background:var(--bg);
      color:var(--text);
      padding:20px;
    }

    /* HEADER */
    .profile-bar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:var(--surface);
      border-radius:var(--radius);
      padding:14px 16px;
      border:1px solid var(--border);
      margin-bottom:20px;
    }

    .profile-left{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .avatar{
      width:42px;
      height:42px;
      border-radius:50%;
      background:var(--soft);
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--accent);
      font-size:18px;
    }

    .profile-name{
      font-size:14px;
      font-weight:600;
    }

    .profile-email{
      font-size:12px;
      color:var(--muted);
    }

    .home-btn{
      color:var(--accent);
      font-size:16px;
      text-decoration:none;
    }

    /* GRID */
    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:14px;
      margin-bottom:20px;
    }

    /* üëá cartes = boutons */
    .card{
      background:var(--surface);
      border-radius:var(--radius);
      padding:18px;
      border:1px solid var(--border);
      display:flex;
      flex-direction:column;
      gap:10px;
      text-decoration:none;
      color:inherit;
      cursor:pointer;
      transition:.15s;
    }

    .card:hover{
      background:var(--soft);
    }

    .card i{
      font-size:20px;
      color:var(--accent);
    }

    .card-title{
      font-size:13px;
      font-weight:600;
    }

    .card-desc{
      font-size:12px;
      color:var(--muted);
      line-height:1.4;
    }

    .full{ grid-column:span 2 }

    /* ACTIONS */
    .actions{
      display:flex;
      gap:10px;
    }

    .btn{
      flex:1;
      height:46px;
      border-radius:999px;
      border:none;
      font-size:13px;
      font-weight:600;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }

    .btn-outline{
      background:transparent;
      color:var(--accent);
      border:1px solid var(--accent);
    }
  </style>
</head>

<body>

  <!-- HEADER PROFIL -->
  <div class="profile-bar">
    <div class="profile-left">
      <div class="avatar">
        <i class="fa-solid fa-user"></i>
      </div>
      <div>
        <div class="profile-name" id="name">‚Äî</div>
        <div class="profile-email" id="email">‚Äî</div>
      </div>
    </div>

    <!-- üè¨ Retour vitrine -->
    <a href="index.html" class="home-btn" title="Retour √† la vitrine">
      <i class="fa-solid fa-store"></i>
    </a>
  </div>

  <!-- DASHBOARD -->
  <div class="grid">

    <a class="card" href="panier.html">
      <i class="fa-solid fa-cart-shopping"></i>
      <div class="card-title">Panier</div>
      <div class="card-desc">Produits ajout√©s, pr√™ts √† commander</div>
    </a>

    <a class="card" href="commande.html">
      <i class="fa-solid fa-clock"></i>
      <div class="card-title">Commandes en cours</div>
      <div class="card-desc">En attente ou en pr√©paration</div>
    </a>

    <a class="card" href="#">
      <i class="fa-solid fa-box"></i>
      <div class="card-title">Commandes re√ßues</div>
      <div class="card-desc">Livr√©es et confirm√©es</div>
    </a>

    <a class="card" href="#">
      <i class="fa-solid fa-triangle-exclamation"></i>
      <div class="card-title">Indisponibles</div>
      <div class="card-desc">Produits non disponibles</div>
    </a>

    <a class="card full" href="#">
      <i class="fa-solid fa-gear"></i>
      <div class="card-title">Param√®tres du compte</div>
      <div class="card-desc">Identit√©, s√©curit√©, pr√©f√©rences</div>
    </a>

  </div>

  <!-- ACTIONS -->
  <div class="actions">
    <button id="logoutBtn" class="btn btn-outline">
      <i class="fa-solid fa-right-from-bracket"></i>
      D√©connexion
    </button>
  </div>

  <!-- AUTH + PROFIL -->
  <script type="module">
    import { auth, db } from "./js/firebase.config.js";
    import { onAuthStateChanged, signOut } from
      "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { doc, getDoc } from
      "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const nameEl = document.getElementById("name");
    const emailEl = document.getElementById("email");
    const logoutBtn = document.getElementById("logoutBtn");

    onAuthStateChanged(auth, async user => {
      if (!user) {
        location.href = "login.html";
        return;
      }

      const snap = await getDoc(doc(db, "users", user.uid));
      if (!snap.exists()) {
        location.href = "login.html";
        return;
      }

      const data = snap.data();
      nameEl.textContent = `${data.firstName} ${data.lastName}`;
      emailEl.textContent = data.email;
    });

    logoutBtn.onclick = async () => {
      await signOut(auth);
      location.href = "login.html";
    };
  </script>

</body>
</html>
